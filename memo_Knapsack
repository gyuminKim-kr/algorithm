def f(n, M):
    if (n,M) in memo:
        return memo[(n,M)]
    if n == 0 or M == 0:
        return 0
    if M < w[n-1]:
        memo[(n,M)] = f(n-1, M)
    else:
        memo[(n,M)] = max(f(n-1,M), p[n-1]+f(n-1,M-w[n-1]))
    return memo[(n,M)]


M = 30
memo = {}
w = [5, 10, 25]
p = [100, 300, 500]
print(f(len(w), M))
